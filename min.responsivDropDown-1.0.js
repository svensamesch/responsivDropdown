(function(e){e.fn.responsivDropdown=function(t){var n={secondMenu:"none",menuID:"#nav",innerWrap:".dropdown",maxWith:830,mobilNavi:"Navigation",dropdownDelay:800,slidedownSpeed:500,slideUpSpeed:500,backbutton:"back"};t=e.extend(n,t);return this.each(function(){function n(t){if(!t.length)return;e(".use-hover").removeClass("use-hover");t.wrap('<div id="menu_wrap"></div>');var n=t.parent();e(n).find("div").wrapInner("<span />")}function r(){e(".backlink").remove();e(".forward").remove();e("#drillmenu div").css("left",0);e("#drillmenu div div").css("left","177px");e("#drillmenu").find("div").css("display","none")}function i(n){var r;if(!n.length)return;e(n).hover(function(){r=e("#drillmenu .forward").length;e(this).siblings().find("div").css({display:"none"});e(this).find("div").first().stop(true,true).slideDown(t.slidedownSpeed,function(){e(this).css({overflow:"visible"})})},function(){if(r==0){e(this).find("div").first().stop(true,true).delay(t.dropdownDelay).slideUp(t.slideUpSpeed)}})}function s(n){if(!n.length)return;n.css("left","0px");n.find("div").stop();n.find("div").css("display","block");var r='<p class="backlink"><a class="back" '+'href="javascript:;">« '+t.backbutton+"</a></p>";n.find("span").not(":eq(0)").prepend(r);n.find("p").not(".backlink").prepend('<span class="forward">»</span>');var i=e(".forward").parent().children("div");e(".forward").parent().not(":has(div)").addClass("fwd-hidden")}function o(t){if(!t.length)return;e("#drillmenu div").css("left",234);var n=0;t.find(".forward").click(function(r){var i=e(this).parent();i.siblings().find("div").hide();i.find("div:first").show().find("span").scrollTop(0);if(!e(this).parent().find("div").length)return;n+=-234;t.animate({left:n+"px"})});t.find("a").click(function(r){var i=e(this).parent();if(e(this).parent().parent().parent().attr("id")==t.attr("id"))return;n+=234;t.animate({left:n+"px"})})}function u(n){var r=0;e(t.menuID).prepend('<div class="mobilnavi">Navigation</div>');n.slideUp(0);e(".mobilnavi").click(function(){if(r==0){n.slideDown(t.dropdownSpeed);r=1}else{n.slideUp(t.dropdownSpeed);r=0}})}function a(){e(".mobilnavi").remove();e(t.innerWrap).css("display","block")}function f(e){e.find("div").wrapInner("<span />")}function l(){e(t.secondMenu+" div p:first").clone().prependTo("#drillmenu > span");e(t.secondMenu+" p:first").addClass("start");e(t.secondMenu).clone().appendTo(".start");e(".start div p:eq(0)").remove();e(".start div p:eq(3)").remove();e(".start div:not(div:first)").appendTo(".start div p:eq(2)")}function c(){e(t.secondMenu).show(0);e(".start").remove()}function h(){var h=false;var p=e("#drillmenu");var d=e("#startnav");var v=e(document).width();var m=p.width();p.replaceElements({},function(){n(e("#drillmenu"))});if(t.secondMenu!="none"){d.replaceElements({},function(){f(e(t.secondMenu))})}if(v<=t.maxWith){if(t.secondMenu!="none"){l()}s(e("#drillmenu"));o(e("#drillmenu"));u(e(t.innerWrap));h=true}else{i(e("#drillmenu p"));h=false}e(window).resize(function(){v=e(document).width();if(v<=t.maxWith){if(h==false){if(t.secondMenu!="none"){l()}s(e("#drillmenu"));o(e("#drillmenu"));u(e(t.innerWrap));h=true}}else{if(h==true){if(t.secondMenu!="none"){c()}r();a();i(e("#drillmenu p"));h=false}}})}h()})}})(jQuery)